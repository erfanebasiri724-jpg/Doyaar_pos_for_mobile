<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± ğŸ¦</title>
<style>
:root{
  --bg:#fff0f5;      /* Ø²Ù…ÛŒÙ†Ù‡ Ù¾Ø§Ø³ØªÙ„ÛŒ Ø±ÙˆØ´Ù† */
  --card:#ffe4e1;    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
  --accent:#ff66b2;  /* ØµÙˆØ±ØªÛŒ */
  --accent-2:#ff99cc;
  --muted:#555;
  --text:#222;
  --success:#28a745;
}
*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family:Tahoma, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:14px 12px;
  text-align:center;
  background:linear-gradient(90deg,var(--card),#ffe0e6);
  border-bottom:1px solid rgba(255,102,178,0.2);
}
header h1{margin:0;font-size:1.3rem;font-weight:800;color:var(--accent-2);}
.container{padding:12px;padding-bottom:120px;}
.search{margin:10px 0;}
.search input{
  width:100%;padding:10px 12px;border-radius:10px;border:1px solid #ffccdd;background:#fff;color:var(--text);font-size:0.95rem;
}
.controls{display:flex;gap:8px;margin-top:8px}
.btn{flex:1;padding:10px;border-radius:10px;border:none;background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(255,102,178,0.3);color:var(--text)}
.accordion{margin-top:12px}
.acc-btn{
  width:100%;text-align:right;padding:12px;border-radius:10px;border:none;background:#fff0f5;color:var(--accent-2);font-weight:700;
  display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:0.95rem;
}
.acc-btn.active{background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#fff;}
.panel{background:var(--card);margin-top:8px;border-radius:8px;padding:6px;display:none;}
.product{
  display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px dashed rgba(0,0,0,0.05);gap:8px;
}
.prod-left{display:flex;flex-direction:column;align-items:flex-end;max-width:70%}
.prod-name{font-weight:700;font-size:0.95rem}
.prod-price{color:var(--muted);font-size:0.82rem;margin-top:4px}
.prod-add{
  padding:8px 10px;background:var(--accent);border:none;border-radius:8px;color:#fff;font-weight:800;cursor:pointer;min-width:72px;
  transition:transform .08s ease;
}
.prod-add:active{transform:scale(.97)}
.cart-toggle{
  position:fixed;bottom:18px;left:18px;width:56px;height:56px;border-radius:50%;
  background:var(--accent);color:#fff;font-weight:800;font-size:20px;border:none;cursor:pointer;z-index:1300;
  display:flex;align-items:center;justify-content:center;
}
.cart-count{
  position:absolute;top:-7px;right:-7px;background:#ff2a6d;color:#fff;width:22px;height:22px;border-radius:50%;font-size:0.8rem;display:flex;align-items:center;justify-content:center;font-weight:800;
}
.cart-panel{
  position:fixed;top:0;right:0;width:88%;max-width:380px;height:100%;background:linear-gradient(180deg,var(--card),#fff0f5);
  border-left:1px solid rgba(255,102,178,0.2);box-shadow:-12px 0 36px rgba(0,0,0,0.15);
  display:flex;flex-direction:column;padding:12px;transform:translateX(110%);transition:transform .28s ease;z-index:1250;
}
.cart-panel.open{transform:translateX(0)}
.cart-header{display:flex;justify-content:space-between;align-items:center;gap:8px;padding-bottom:6px}
.cart-list{flex:1;overflow:auto;margin-top:8px;padding-right:6px}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px dashed rgba(0,0,0,0.05)}
.cart-item .name{font-weight:700;font-size:0.95rem}
.cart-item .price{font-size:0.82rem;color:var(--muted)}
.qty{display:flex;gap:6px;align-items:center}
.qty input{width:56px;padding:6px;border-radius:8px;border:1px solid #ffccdd;text-align:center;background:#fff;color:var(--text);font-size:0.9rem}
.remove-btn{padding:6px 8px;background:#ff66b2;border:none;border-radius:6px;color:#fff;font-weight:700;cursor:pointer}
.total{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-weight:800;font-size:0.95rem}
.printBtn{width:100%;margin-top:10px;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#fff;font-weight:800}
.added-feedback{
  position:fixed;top:10px;left:50%;transform:translateX(-50%);background:var(--success);color:#fff;padding:8px 12px;border-radius:8px;font-weight:700;
  font-size:0.87rem;display:none;z-index:1350;box-shadow:0 6px 18px rgba(0,0,0,0.2);
}
@media print{
  body *{visibility:hidden}
  #invoicePrint, #invoicePrint *{visibility:visible}
  #invoicePrint{position:fixed;left:0;top:0;width:100%;background:#fff;color:#000;padding:18px}
}
@media(min-width:900px){.container{max-width:900px;margin:0 auto}.cart-panel{width:360px}}
</style>
</head>
<body>
<header><h1>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± ğŸ¦</h1></header>
<div class="container">
  <div class="search">
    <input id="searchInput" placeholder="Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ù…Ø­ØµÙˆÙ„..." />
  </div>
  <div class="controls">
    <button class="btn" id="clearCartBtn">Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
  </div>
  <div id="listContainer"></div>
</div>
<button class="cart-toggle" id="cartToggle">ğŸ›’
  <div class="cart-count" id="cartCount">0</div>
</button>
<div class="cart-panel" id="cartPanel" aria-hidden="true">
  <div class="cart-header">
    <div><strong>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</strong></div>
    <button id="closeCartBtn" style="background:none;border:none;color:#ff66b2;font-size:18px;font-weight:800;cursor:pointer">âœ–</button>
    <div class="small" id="subtotalShow">Ø¬Ù…Ø¹: 0 ØªÙˆÙ…Ø§Ù†</div>
  </div>
  <div class="cart-list" id="cartList"></div>
  <div class="total">
    <div class="small">Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ</div>
    <div id="totalPrice">0 ØªÙˆÙ…Ø§Ù†</div>
  </div>
  <button class="printBtn" id="printBtn">Ù†Ù…Ø§ÛŒØ´ Ùˆ Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±</button>
</div>
<div id="addedFeedback" class="added-feedback">âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯</div>
<div id="invoicePrint" style="display:none;font-family:Tahoma, sans-serif;direction:rtl;">
  <div style="text-align:center;margin-bottom:8px;">
    <div style="font-weight:800;font-size:1.1rem">Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</div>
    <div class="small">Ø±Ø³ÛŒØ¯ ÙØ±ÙˆØ´</div>
  </div>
  <div id="invoiceItems"></div>
  <div style="margin-top:8px;font-weight:800;display:flex;justify-content:space-between">
    <div>Ø¬Ù…Ø¹ Ú©Ù„:</div>
    <div id="invoiceTotal">0 ØªÙˆÙ…Ø§Ù†</div>
  </div>
</div>

<script>
// Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚
const products=[
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø¨Ø¯ÙˆÙ† Ù…ØºØ²",price:220000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù…ØºØ²Ø¯Ø§Ø±",price:260000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:40000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø­ØµÛŒØ±ÛŒ",price:40000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø§Ø³Ú©ÙˆÙ¾ÛŒ",price:25000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ù‚ÛŒÙÛŒ ÙˆØ§Ù†ÛŒÙ„ÛŒ",price:35000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ù‚ÛŒÙÛŒ ÙˆØ§Ù†ÛŒÙ„ Ú©Ø§Ú©Ø§Ø¦Ùˆ",price:40000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ÛŒ Ù„ÛŒÙˆØ§Ù† Ø¨Ø²Ø±Ú¯",price:50000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¨Ø³ØªÙ†ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ÛŒ Ù„ÛŒÙˆØ§Ù† Ú©ÙˆÚ†Ú©",price:40000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø·Ø§Ù„Ø¨ÛŒ Ø¨Ø³ØªÙ†ÛŒ",price:70000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"ÙØ§Ù„ÙˆØ¯Ù‡ Ø¨Ø³ØªÙ†ÛŒ",price:70000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬ Ø¨Ø³ØªÙ†ÛŒ",price:60000,cat:"Ø¨Ø³ØªÙ†ÛŒ"},  
  
  {name:"ÙØ§Ù„ÙˆØ¯Ù‡",price:50000,cat:"ÙØ§Ù„ÙˆØ¯Ù‡"},

  {name:"Ø´ÛŒØ± Ù…ÙˆØ²",price:80000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø®Ø±Ù…Ø§",price:120000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ú¯Ø±Ø¯Ùˆ",price:150000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒØ± Ù¾Ø³ØªÙ‡",price:150000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒØ± Ø§Ù†Ø¨Ù‡",price:180000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø¨Ø³ØªÙ†ÛŒ",price:100000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø´ÛŒÚ©",price:120000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
  {name:"Ø¢ÛŒØ³ Ù¾Ú©",price:120000,cat:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},

  {name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬",price:40000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ø§Ù†Ø§Ø±",price:90000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ø²Ø±Ø´Ú©",price:90000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ø³ÛŒØ¨",price:70000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ø·Ø§Ù„Ø¨ÛŒ",price:60000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡",price:60000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ø¢Ù„Ø¨Ø§Ù„Ùˆ",price:60000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢Ø¨ Ù¾Ø±ØªØºØ§Ù„",price:80000,cat:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§"},

  {name:"Ù…Ø¹Ø¬ÙˆÙ† Ù„ÛŒÙˆØ§Ù†ÛŒ",price:160000,cat:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ú©ÙˆÚ†Ú©",price:180000,cat:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ø¨Ø²Ø±Ú¯",price:250000,cat:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:70000,cat:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
  {name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù…Ø®ØµÙˆØµ",price:150000,cat:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},

  {name:"Ø³ÛŒÙ†Ú¯Ù„",price:40000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¯Ø¨Ù„",price:50000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢ÙÙˆÚ¯Ø§ØªÙˆ",price:80000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ù‡Ø§Øª Ú†Ø§Ú©Ù„Øª",price:90000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ú©Ø§Ù¾ÙˆÚ†ÛŒÙ†Ùˆ",price:80000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ù…Ø§Ø³Ø§Ù„Ø§",price:80000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ù†Ø³Ú©Ø§ÙÙ‡",price:75000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ù„Ø§ØªÙ‡",price:85000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø¢ÛŒØ³ Ù„Ø§ØªÙ‡",price:90000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø§Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:70000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ø§ÛŒØ³ Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:80000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ú©Ø§Ø±Ø§Ù…Ù„ Ù…Ø§Ú©ÛŒØ§ØªÙˆ",price:90000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"},
  {name:"Ù…ÙˆÚ©Ø§",price:90000,cat:"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§"}
];

const categories=[...new Set(products.map(p=>p.cat))];
const listContainer=document.getElementById('listContainer');
categories.forEach(cat=>{
  const accBtn=document.createElement('button');
  accBtn.className='acc-btn';
  accBtn.innerHTML=`${cat} <span>â–¼</span>`;
  const panel=document.createElement('div');
  panel.className='panel';
  
  products.filter(p=>p.cat===cat).forEach(p=>{
    const div=document.createElement('div');
    div.className='product';
    div.innerHTML=`<div class="prod-left"><div class="prod-name">${p.name}</div><div class="prod-price">${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div></div><button class="prod-add">Ø§Ø¶Ø§ÙÙ‡</button>`;
    panel.appendChild(div);
  });
  
  accBtn.addEventListener('click',()=>{panel.style.display=(panel.style.display==='block')?'none':'block';accBtn.classList.toggle('active');});
  
  listContainer.appendChild(accBtn);
  listContainer.appendChild(panel);
});

const cartToggle=document.getElementById('cartToggle');
const cartPanel=document.getElementById('cartPanel');
const cartList=document.getElementById('cartList');
const cartCount=document.getElementById('cartCount');
const subtotalShow=document.getElementById('subtotalShow');
const addedFeedback=document.getElementById('addedFeedback');
const closeCartBtn=document.getElementById('closeCartBtn');
const printBtn=document.getElementById('printBtn');
const invoiceItems=document.getElementById('invoiceItems');
const invoiceTotal=document.getElementById('invoiceTotal');
const clearCartBtn=document.getElementById('clearCartBtn');

let cart=[];

function updateCart(){
  cartList.innerHTML='';
  let total=0;
  cart.forEach((item,index)=>{
    const div=document.createElement('div');
    div.className='cart-item';
    div.innerHTML=`
      <div class="name">${item.name}</div>
      <div class="qty">
        <input type="number" min="1" value="${item.qty}" data-index="${index}" />
      </div>
      <div class="price">${(item.price*item.qty).toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
      <button class="remove-btn" data-index="${index}">âˆ’</button>
    `;
    cartList.appendChild(div);
    total+=item.price*item.qty;
  });
  cartCount.textContent=cart.reduce((acc,i)=>acc+i.qty,0);
  subtotalShow.textContent=`Ø¬Ù…Ø¹: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
  document.getElementById('totalPrice').textContent=`${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
}

listContainer.addEventListener('click',e=>{
  if(e.target.classList.contains('prod-add')){
    const name=e.target.parentElement.querySelector('.prod-name').textContent;
    const product=products.find(p=>p.name===name);
    let cartItem=cart.find(c=>c.name===name);
    if(cartItem) cartItem.qty+=1;
    else cart.push({name:product.name,price:product.price,qty:1});
    
    updateCart();
    addedFeedback.style.display='block';
    setTimeout(()=>{addedFeedback.style.display='none'},700);
  }
});

cartList.addEventListener('input',e=>{
  if(e.target.tagName==='INPUT'){
    const idx=e.target.dataset.index;
    cart[idx].qty=parseInt(e.target.value)||1;
    updateCart();
  }
});

cartList.addEventListener('click',e=>{
  if(e.target.classList.contains('remove-btn')){
    const idx=e.target.dataset.index;
    if(cart[idx].qty>1) cart[idx].qty-=1;
    else cart.splice(idx,1);
    updateCart();
  }
});

cartToggle.addEventListener('click',()=>{cartPanel.classList.toggle('open');cartPanel.setAttribute('aria-hidden',cartPanel.classList.contains('open')?'false':'true');});
closeCartBtn.addEventListener('click',()=>{cartPanel.classList.remove('open');cartPanel.setAttribute('aria-hidden','true');});

// Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ± Ø³ÙÛŒØ¯ (Ù…ÙˆØ¨Ø§ÛŒÙ„ Ùˆ Ø¯Ø³Ú©ØªØ§Ù¾)
printBtn.addEventListener('click', ()=>{
  const invBody = document.createElement('tbody');
  let total = 0;
  
  cart.forEach(it=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td style="text-align:right; padding:4px 8px;">${it.name}</td>
      <td style="text-align:center;">${it.qty}</td>
      <td style="text-align:center;">${it.price.toLocaleString()}</td>
      <td style="text-align:center;">${(it.price*it.qty).toLocaleString()}</td>
    `;
    invBody.appendChild(tr);
    total += it.price * it.qty;
  });

  const printHTML = `
  <html dir="rtl" lang="fa">
  <head>
    <meta charset="UTF-8">
    <title>Ø±Ø³ÛŒØ¯ Ø³ÙØ§Ø±Ø´</title>
    <style>
      body { font-family: sans-serif; direction: rtl; background: white; color: #000; padding: 10px; }
      h2 { text-align: center; margin-bottom: 15px; }
      table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
      th, td { border: 1px solid #999; padding: 6px; text-align: center; font-size: 14px; }
      th { background: #f0f0f0; }
      .footer { text-align: center; font-size: 13px; border-top: 1px solid #ccc; padding-top: 10px; }
    </style>
  </head>
  <body>
    <h2>ÙØ§Ú©ØªÙˆØ± ÙØ±ÙˆØ´ - Ø¯ÙˆØªØ§ÛŒÛŒÙ‡ ğŸ¦</h2>
    <table>
      <thead>
        <tr>
          <th>Ù…Ø­ØµÙˆÙ„</th>
          <th>ØªØ¹Ø¯Ø§Ø¯</th>
          <th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (ØªÙˆÙ…Ø§Ù†)</th>
          <th>Ø¬Ù…Ø¹ Ø¬Ø²Ø¡ (ØªÙˆÙ…Ø§Ù†)</th>
        </tr>
      </thead>
      ${invBody.outerHTML}
    </table>
    <div style="text-align:center; font-weight:bold; margin-bottom:10px;">
      Ø¬Ù…Ø¹ Ú©Ù„: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†
    </div>
    <div class="footer">
      ØªØ§Ø±ÛŒØ® Ú†Ø§Ù¾: ${new Date().toLocaleString()}
    </div>
  </body>
  </html>`;

  const newWin = window.open('', '', 'width=420,height=600');
  newWin.document.write(printHTML);
  newWin.document.close();
  newWin.focus();
  newWin.print();
  newWin.close();
});
  invoiceItems.innerHTML='';
  cart.forEach(item=>{
    const div=document.createElement('div');
    div.style.display='flex';div.style.justifyContent='space-between';div.style.marginBottom='4px';
    div.innerHTML=`<div>${item.name} x ${item.qty}</div><div>${(item.price*item.qty).toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>`;
    invoiceItems.appendChild(div);
  });
  const total=cart.reduce((acc,i)=>acc+i.price*i.qty,0);
  invoiceTotal.textContent=`${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
  window.print();
});

clearCartBtn.addEventListener('click',()=>{cart=[];updateCart();});

const searchInput=document.getElementById('searchInput');
searchInput.addEventListener('input',()=>{ 
  const query=searchInput.value.trim();
  document.querySelectorAll('.panel').forEach(panel=>{
    panel.querySelectorAll('.product').forEach(prod=>{
      const name=prod.querySelector('.prod-name').textContent;
      prod.style.display=name.includes(query)?'flex':'none';
    });
  });
});
</script>
</body>
</html>
