<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± â€” ØµÙ†Ø¯ÙˆÙ‚</title>
<style>
:root{
  --bg:#2b2b2b;      /* Ø²Ù…ÛŒÙ†Ù‡ */
  --card:#3a3a3a;    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
  --accent:#ff66b2;  /* ØµÙˆØ±ØªÛŒ */
  --accent-2:#d94f8f;
  --muted:#bdbdbd;
  --text:#ffffff;
  --success:#28a745;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Tahoma, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Ù‡Ø¯Ø± (ÙÙ‚Ø· Ø§ÙˆÙ„ ØµÙØ­Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒØ´Ù‡) */
header{
  padding:14px 12px;
  text-align:center;
  background:linear-gradient(90deg,var(--card),#111);
  border-bottom:1px solid rgba(255,102,178,0.06);
}
header h1{margin:0;font-size:1.2rem;font-weight:800;}

/* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ */
.container{padding:12px;padding-bottom:120px}

/* Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ */
.search{margin:10px 0}
.search input{
  width:100%;padding:10px 12px;border-radius:10px;border:none;background:#222;color:var(--text);font-size:0.95rem;
}
.controls{display:flex;gap:8px;margin-top:8px}
.btn{flex:1;padding:10px;border-radius:10px;border:none;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(255,102,178,0.18);color:var(--text)}

/* Ø¢Ú©Ø§Ø±Ø¯Ø¦ÙˆÙ† */
.accordion{margin-top:12px}
.acc-btn{
  width:100%;text-align:right;padding:12px;border-radius:10px;border:none;background:#121217;color:var(--text);font-weight:700;
  display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:0.95rem;
}
.acc-btn.active{background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#000}
.panel{background:var(--card);margin-top:8px;border-radius:8px;padding:6px;display:none}

/* Ù…Ø­ØµÙˆÙ„ */
.product{
  display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03);gap:8px;
}
.prod-left{display:flex;flex-direction:column;align-items:flex-end;max-width:70%}
.prod-name{font-weight:700;font-size:0.95rem}
.prod-price{color:var(--muted);font-size:0.82rem;margin-top:4px}
.prod-add{
  padding:8px 10px;background:var(--accent);border:none;border-radius:8px;color:#000;font-weight:800;cursor:pointer;min-width:72px;
  transition:transform .08s ease;
}
.prod-add:active{transform:scale(.97)}

/* Ø¯Ø§ÛŒØ±Ù‡ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±ÙˆÛŒ Ø¢ÛŒÚ©ÙˆÙ† Ø³Ø¨Ø¯ */
.cart-toggle{
  position:fixed;bottom:18px;left:18px;width:56px;height:56px;border-radius:50%;
  background:var(--accent);color:#000;font-weight:800;font-size:20px;border:none;cursor:pointer;z-index:1200;
  display:flex;align-items:center;justify-content:center;
}
.cart-count{
  position:absolute;top:-7px;right:-7px;background:#ff2a6d;color:#fff;width:22px;height:22px;border-radius:50%;font-size:0.8rem;display:flex;align-items:center;justify-content:center;font-weight:800;
}

/* Ù¾Ù†Ù„ Ø³Ø¨Ø¯ Ø§Ø² Ø³Ù…Øª Ø±Ø§Ø³Øª (Ø§Ø³Ù„Ø§ÛŒØ¯ÛŒ) */
.cart-panel{
  position:fixed;top:0;right:0;width:88%;max-width:380px;height:100%;background:linear-gradient(180deg,var(--card),#2b2b2b);
  border-left:1px solid rgba(255,102,178,0.04);box-shadow:-12px 0 36px rgba(0,0,0,0.6);
  display:flex;flex-direction:column;padding:12px;transform:translateX(110%);transition:transform .28s ease;z-index:1250;
  border-radius:0 0 0 0;
}
.cart-panel.open{transform:translateX(0)}
.cart-header{display:flex;justify-content:space-between;align-items:center;gap:8px;padding-bottom:6px}
.cart-list{flex:1;overflow:auto;margin-top:8px;padding-right:6px}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px dashed rgba(255,255,255,0.03)}
.cart-item .name{font-weight:700;font-size:0.95rem}
.cart-item .price{font-size:0.82rem;color:var(--muted)}
.qty{display:flex;gap:6px;align-items:center}
.qty input{width:56px;padding:6px;border-radius:8px;border:none;text-align:center;background:#2b2b2b;color:var(--text);font-size:0.9rem}
.remove-btn{padding:6px 8px;background:#ff66b2;border:none;border-radius:6px;color:#000;font-weight:700;cursor:pointer}
.total{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-weight:800;font-size:0.95rem}
.printBtn{width:100%;margin-top:10px;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#000;font-weight:800}

/* ÙÛŒØ¯Ø¨Ú© Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† (Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡ØŒ Ú©ÙˆÚ†Ú© Ùˆ Ø¸Ø±ÛŒÙ) */
.added-feedback{
  position:fixed;top:10px;left:50%;transform:translateX(-50%);background:var(--success);color:#fff;padding:8px 12px;border-radius:8px;font-weight:700;
  font-size:0.87rem;display:none;z-index:1300;box-shadow:0 6px 18px rgba(0,0,0,0.35);
}

/* ÙØ§Ú©ØªÙˆØ± Ú†Ø§Ù¾ */
@media print{
  body *{visibility:hidden}
  #invoicePrint, #invoicePrint *{visibility:visible}
  #invoicePrint{position:fixed;left:0;top:0;width:100%;background:#fff;color:#000;padding:18px}
}

/* ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ */
@media(min-width:900px){
  .container{max-width:900px;margin:0 auto}
  .cart-panel{width:360px}
}
</style>
</head>
<body>

<header><h1>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</h1></header>

<div class="container">
  <div class="search">
    <input id="searchInput" placeholder="Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ù…Ø­ØµÙˆÙ„..." />
  </div>

  <div class="controls">
    <button class="btn" id="clearCartBtn">Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
  </div>

  <div id="listContainer"></div>
</div>

<button class="cart-toggle" id="cartToggle">ğŸ›’
  <div class="cart-count" id="cartCount">0</div>
</button>

<div class="cart-panel" id="cartPanel" aria-hidden="true">
  <div class="cart-header">
    <div><strong>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</strong></div>
    <div class="small" id="subtotalShow">Ø¬Ù…Ø¹: 0 ØªÙˆÙ…Ø§Ù†</div>
  </div>

  <div class="cart-list" id="cartList"></div>

  <div class="total">
    <div class="small">Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ</div>
    <div id="totalPrice">0 ØªÙˆÙ…Ø§Ù†</div>
  </div>

  <button class="printBtn" id="printBtn">Ù†Ù…Ø§ÛŒØ´ Ùˆ Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±</button>
</div>

<div id="addedFeedback" class="added-feedback">âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯</div>

<!-- Ù‚Ø§Ù„Ø¨ ÙØ§Ú©ØªÙˆØ± Ø¨Ø±Ø§ÛŒ Ú†Ø§Ù¾ -->
<div id="invoicePrint" style="display:none;font-family:Tahoma, sans-serif;direction:rtl;">
  <div style="text-align:center;margin-bottom:8px;">
    <div style="font-weight:800;font-size:1.1rem">Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</div>
    <div class="small">Ø±Ø³ÛŒØ¯ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ÛŒ</div>
    <div class="small" id="invDate"></div>
  </div>
  <table style="width:100%;border-collapse:collapse;">
    <thead><tr style="border-bottom:1px solid #ddd"><th style="text-align:right">Ù…Ø­ØµÙˆÙ„</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>ÙÛŒ</th><th>Ø¬Ù…Ø¹</th></tr></thead>
    <tbody id="invBody"></tbody>
  </table>
  <div style="margin-top:8px;text-align:right;font-weight:800">Ø¬Ù…Ø¹ Ú©Ù„: <span id="invTotal">0</span> ØªÙˆÙ…Ø§Ù†</div>
  <div style="margin-top:10px;text-align:center;font-size:12px">Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ â€” Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</div>
</div>

<script>
// --- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª) ---
const categories = {
  "Ø¨Ø³ØªÙ†ÛŒ Ùˆ ÙØ§Ù„ÙˆØ¯Ù‡":[
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø¨Ø¯ÙˆÙ† Ù…ØºØ²",price:220000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù…ØºØ²Ø¯Ø§Ø±",price:260000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø­ØµÛŒØ±ÛŒ",price:40000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:40000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø§Ø³Ú©ÙˆÙ¾ÛŒ",price:25000},
    {name:"ÙØ§Ù„ÙˆØ¯Ù‡",price:50000},
    {name:"ÙØ§Ù„ÙˆØ¯Ù‡ Ø¨Ø³ØªÙ†ÛŒ",price:70000},
    {name:"Ø·Ø§Ù„Ø¨ÛŒ Ø¨Ø³ØªÙ†ÛŒ",price:70000},
    {name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬ Ø¨Ø³ØªÙ†ÛŒ",price:60000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ù‚ÛŒÙÛŒ ÙˆØ§Ù†ÛŒÙ„ÛŒ",price:35000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ù‚ÛŒÙÛŒ ÙˆØ§Ù†ÛŒÙ„ Ú©Ø§Ú©Ø§Ø¦Ùˆ",price:40000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ÛŒ Ù„ÛŒÙˆØ§Ù† Ø¨Ø²Ø±Ú¯",price:50000},
    {name:"Ø¨Ø³ØªÙ†ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ÛŒ Ù„ÛŒÙˆØ§Ù† Ú©ÙˆÚ†Ú©",price:40000}
  ],
  "Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§":[
    {name:"Ø´ÛŒØ± Ù…ÙˆØ²",price:80000},
    {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø®Ø±Ù…Ø§",price:120000},
    {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ú¯Ø±Ø¯Ùˆ",price:150000},
    {name:"Ø´ÛŒØ± Ù¾Ø³ØªÙ‡",price:150000},
    {name:"Ø´ÛŒØ± Ø§Ù†Ø¨Ù‡",price:180000},
    {name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø¨Ø³ØªÙ†ÛŒ",price:100000},
    {name:"Ø´ÛŒÚ©",price:120000},
    {name:"Ø¢ÛŒØ³ Ù¾Ú©",price:120000}
  ],
  "Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§":[
    {name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬",price:40000},
    {name:"Ø¢Ø¨ Ø§Ù†Ø§Ø±",price:90000},
    {name:"Ø¢Ø¨ Ø²Ø±Ø´Ú©",price:90000},
    {name:"Ø¢Ø¨ Ø³ÛŒØ¨",price:70000},
    {name:"Ø¢Ø¨ Ø·Ø§Ù„Ø¨ÛŒ",price:60000},
    {name:"Ø¢Ø¨ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡",price:60000},
    {name:"Ø¢Ø¨ Ø¢Ù„Ø¨Ø§Ù„Ùˆ",price:60000},
    {name:"Ø¢Ø¨ Ù¾Ø±ØªØºØ§Ù„",price:80000}
  ],
  "Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ":[
    {name:"Ù…Ø¹Ø¬ÙˆÙ† Ù„ÛŒÙˆØ§Ù†ÛŒ",price:160000},
    {name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ú©ÙˆÚ†Ú©",price:180000},
    {name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ø¨Ø²Ø±Ú¯",price:250000},
    {name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:70000},
    {name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù…Ø®ØµÙˆØµ",price:150000}
  ],
  "Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§":[
    {name:"Ø³ÛŒÙ†Ú¯Ù„",price:40000},
    {name:"Ø¯Ø¨Ù„",price:50000},
    {name:"Ø¢ÙÙˆÚ¯Ø§ØªÙˆ",price:80000},
    {name:"Ù‡Ø§Øª Ú†Ø§Ú©Ù„Øª",price:90000},
    {name:"Ú©Ø§Ù¾ÙˆÚ†ÛŒÙ†Ùˆ",price:80000},
    {name:"Ù…Ø§Ø³Ø§Ù„Ø§",price:80000},
    {name:"Ù†Ø³Ú©Ø§ÙÙ‡",price:75000},
    {name:"Ù„Ø§ØªÙ‡",price:85000},
    {name:"Ø¢ÛŒØ³ Ù„Ø§ØªÙ‡",price:90000},
    {name:"Ø§Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:70000},
    {name:"Ø§ÛŒØ³ Ø§Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:80000},
    {name:"Ú©Ø§Ø±Ø§Ù…Ù„ Ù…Ø§Ú©ÛŒØ§ØªÙˆ",price:90000},
    {name:"Ù…ÙˆÚ©Ø§",price:90000}
  ]
};

// --- Ù…ØªØºÛŒØ±Ù‡Ø§ Ùˆ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ ---
let cart = [];
const listContainer = document.getElementById('listContainer');
const cartList = document.getElementById('cartList');
const totalPriceEl = document.getElementById('totalPrice');
const cartCountEl = document.getElementById('cartCount');
const subtotalShow = document.getElementById('subtotalShow');
const clearCartBtn = document.getElementById('clearCartBtn');
const printBtn = document.getElementById('printBtn');
const searchInput = document.getElementById('searchInput');
const cartToggle = document.getElementById('cartToggle');
const cartPanel = document.getElementById('cartPanel');
const addedFeedback = document.getElementById('addedFeedback');

// Ø¨Ø§Ø²/Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ù†Ù„ Ø³Ø¨Ø¯
cartToggle.addEventListener('click', ()=> {
  cartPanel.classList.toggle('open');
  cartPanel.setAttribute('aria-hidden', cartPanel.classList.contains('open') ? 'false' : 'true');
});

// Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ø¢Ú©Ø§Ø±Ø¯Ø¦ÙˆÙ†)
function renderList(filter=''){
  listContainer.innerHTML = '';
  for (const cat in categories){
    const accWrap = document.createElement('div');
    accWrap.className = 'accordion';

    const btn = document.createElement('button');
    btn.className = 'acc-btn';
    btn.innerHTML = `${cat} <span>+</span>`;
    accWrap.appendChild(btn);

    const panel = document.createElement('div');
    panel.className = 'panel';

    categories[cat].forEach(prod => {
      if(filter && !prod.name.includes(filter)) return;
      const prodRow = document.createElement('div');
      prodRow.className = 'product';

      const left = document.createElement('div'); left.className = 'prod-left';
      const nameEl = document.createElement('div'); nameEl.className='prod-name'; nameEl.textContent = prod.name;
      const priceEl = document.createElement('div'); priceEl.className='prod-price'; priceEl.textContent = prod.price.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
      left.appendChild(nameEl); left.appendChild(priceEl);

      const addBtn = document.createElement('button');
      addBtn.className = 'prod-add';
      addBtn.textContent = 'Ø§ÙØ²ÙˆØ¯Ù†';
      addBtn.addEventListener('click', ()=>{
        addToCart(prod);
        showFeedback(); // ÙÛŒØ¯Ø¨Ú© Ø«Ø§Ø¨Øª Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡
        // Ú©ÙˆÚ†Ú©ØªØ±ÛŒÙ† Ø§ÙÚ©Øª Ù…Ø­Ù„ÛŒ Ù‡Ù…: Ø³Ø±ÛŒØ¹ Ùˆ Ú©ÙˆØªØ§Ù‡
        addBtn.disabled = true;
        addBtn.style.opacity = '0.8';
        addBtn.textContent = 'âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯';
        setTimeout(()=>{ addBtn.disabled = false; addBtn.style.opacity='1'; addBtn.textContent='Ø§ÙØ²ÙˆØ¯Ù†' },700);
      });

      prodRow.appendChild(left);
      prodRow.appendChild(addBtn);
      panel.appendChild(prodRow);
    });

    btn.addEventListener('click', ()=> {
      const openNow = panel.style.display === 'block';
      panel.style.display = openNow ? 'none' : 'block';
      btn.classList.toggle('active', !openNow);
    });

    accWrap.appendChild(panel);
    listContainer.appendChild(accWrap);
  }
}

// Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ÙÛŒØ¯Ø¨Ú© Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ (Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡)
let fbTimer = null;
function showFeedback(){
  if(fbTimer) clearTimeout(fbTimer);
  addedFeedback.style.display = 'block';
  fbTimer = setTimeout(()=>{ addedFeedback.style.display = 'none'; fbTimer = null; },700);
}

// Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ (Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ Ø¨ÙˆØ¯ qty++ØŒ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ø¢ÛŒØªÙ… Ø¬Ø¯ÛŒØ¯)
function addToCart(prod){
  const idx = cart.findIndex(c => c.name === prod.name);
  if(idx > -1) cart[idx].qty += 1;
  else cart.push({...prod, qty: 1});
  renderCart();
}

// Ø±Ù†Ø¯Ø± Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
function renderCart(){
  cartList.innerHTML = '';
  let subtotal = 0;
  cart.forEach((item, idx) => {
    const row = document.createElement('div');
    row.className = 'cart-item';

    const left = document.createElement('div');
    left.innerHTML = `<div class="name">${item.name}</div>
                      <div class="price">${(item.price).toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>`;

    const right = document.createElement('div');
    right.className = 'qty';
    const input = document.createElement('input');
    input.type = 'number';
    input.min = '1';
    input.value = item.qty;
    input.addEventListener('change', (e)=> {
      const v = parseInt(e.target.value) || 1;
      item.qty = v;
      renderCart();
    });

    const removeBtn = document.createElement('button');
    removeBtn.className = 'remove-btn';
    removeBtn.textContent = 'âŒ';
    // Ø­Ø°Ù Ø¯ÙˆÙ†Ù‡â€ŒØ¯ÙˆÙ†Ù‡: Ø§Ú¯Ø± qty>1 Ú©Ù… Ú©Ù†ØŒ ÙˆÚ¯Ø±Ù†Ù‡ Ø­Ø°Ù Ú©Ù†
    removeBtn.addEventListener('click', ()=>{
      if(item.qty > 1) item.qty -= 1;
      else cart.splice(idx,1);
      renderCart();
    });

    right.appendChild(input);
    right.appendChild(removeBtn);

    const priceTotal = document.createElement('div');
    priceTotal.className = 'price';
    priceTotal.textContent = (item.price * item.qty).toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';

    row.appendChild(left);
    row.appendChild(right);
    row.appendChild(priceTotal);

    cartList.appendChild(row);

    subtotal += item.price*item.qty;
  });

  totalPriceEl.textContent = subtotal.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
  subtotalShow.textContent = 'Ø¬Ù…Ø¹: ' + subtotal.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
  cartCountEl.textContent = cart.reduce((s,i)=>s + i.qty, 0);
}

// Ø­Ø°Ù Ú©Ø§Ù…Ù„ Ø³Ø¨Ø¯
clearCartBtn.addEventListener('click', ()=>{
  cart = [];
  renderCart();
});

// Ø¬Ø³ØªØ¬Ùˆ
searchInput.addEventListener('input', (e)=> renderList(e.target.value.trim()));

// Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ± (Ù…ÙˆØ¨Ø§ÛŒÙ„ Ùˆ Ø¯Ø³Ú©ØªØ§Ù¾) â€” Ù‚Ø¨Ù„ Ú†Ø§Ù¾ØŒ Ù…Ø­ØªÙˆÛŒ ÙØ§Ú©ØªÙˆØ± Ø±Ø§ Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒÙ…
printBtn.addEventListener('click', ()=>{
  const invBody = document.getElementById('invBody');
  const invTotal = document.getElementById('invTotal');
  const invDate = document.getElementById('invDate');
  invBody.innerHTML = '';
  let total = 0;
  cart.forEach(it=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td style="text-align:right">${it.name}</td><td>${it.qty}</td><td>${it.price.toLocaleString()}</td><td>${(it.price*it.qty).toLocaleString()}</td>`;
    invBody.appendChild(tr);
    total += it.price * it.qty;
  });
  invTotal.textContent = total.toLocaleString();
  invDate.textContent = new Date().toLocaleString();

  const printContent = document.getElementById('invoicePrint').innerHTML;
  const newWin = window.open('', '', 'width=400,height=600');
  newWin.document.write('<html><head><title>Ø±Ø³ÛŒØ¯</title></head><body>'+printContent+'</body></html>');
  newWin.document.close(); newWin.focus(); newWin.print(); newWin.close();
});

// Ø´Ø±ÙˆØ¹
renderList();
renderCart();
</script>
</body>
</html>
