<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± â€” ØµÙ†Ø¯ÙˆÙ‚ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
<style>
:root{
  --bg:#0f0f14;
  --card:#17171b;
  --accent:#ff5fa8;
  --accent-dark:#d94f8f;
  --muted:#bdbdbd;
  --text:#ffffff;
}
*{box-sizing:border-box}
body{margin:0;font-family:Tahoma, Arial, sans-serif;background:var(--bg);color:var(--text)}
header{display:flex;align-items:center;justify-content:center;padding:14px;background:linear-gradient(90deg,var(--card),#111);border-bottom:1px solid rgba(255,95,168,0.08)}
header h1{margin:0;font-size:1.3rem;font-weight:700}
.container{padding:12px}
.search{margin:8px 0}
.search input{width:100%;padding:10px 12px;border-radius:10px;border:none;background:#111;color:var(--text);font-size:0.95rem}
.controls{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
.btn{flex:1;padding:10px;border-radius:10px;border:none;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(255,95,168,0.18);color:var(--text)}
.accordion{margin-top:12px}
.acc-btn{width:100%;text-align:right;padding:12px;border-radius:10px;border:none;background:#121217;color:var(--text);font-weight:700;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.acc-btn.active{background:linear-gradient(90deg,var(--accent-dark),var(--accent));color:#000}
.panel{background:var(--card);margin-top:8px;border-radius:8px;padding:6px;display:none}
.product{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03);gap:8px}
.prod-left{display:flex;flex-direction:column;align-items:flex-end}
.prod-name{font-weight:600}
.prod-price{color:var(--muted);font-size:0.9rem;margin-top:4px}
.prod-add{padding:8px 10px;background:var(--accent);border:none;border-radius:8px;color:#000;font-weight:700;cursor:pointer}

.cart-toggle{position:fixed;bottom:20px;left:20px;width:60px;height:60px;border-radius:50%;background:var(--accent);color:#000;font-weight:700;font-size:1.2rem;border:none;cursor:pointer;z-index:1000}
.cart-panel{position:fixed;bottom:20px;left:20px;width:320px;height:400px;background:linear-gradient(180deg,#141418,#0f0f13);border-radius:12px;padding:10px;box-shadow:0 8px 24px rgba(0,0,0,0.6);border:1px solid rgba(255,95,168,0.06);display:flex;flex-direction:column;overflow:hidden;transform:translateY(420px);transition:0.3s}
.cart-panel.open{transform:translateY(0)}
.cart-header{display:flex;justify-content:space-between;align-items:center;gap:8px}
.cart-list{flex:1;overflow:auto;margin-top:8px} /* Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¯Ø§Ø®Ù„ÛŒ */
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03)}
.qty{display:flex;gap:6px;align-items:center}
.qty input{width:56px;padding:6px;border-radius:8px;border:none;text-align:center;background:#0d0d0f;color:var(--text)}
.remove-btn{padding:4px 8px;background:#ff5fa8;border:none;border-radius:6px;color:#000;font-weight:700;cursor:pointer;margin-left:6px}
.small{font-size:0.85rem;color:var(--muted)}
.total{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-weight:800}
.printBtn{width:100%;margin-top:8px;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#000;font-weight:800}
@media print{
  body *{visibility:hidden}
  #invoicePrint, #invoicePrint *{visibility:visible}
  #invoicePrint{position:fixed;left:0;top:0;width:100%;background:#fff;color:#000}
}
</style>
</head>
<body>

<header>
  <h1>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</h1>
</header>

<div class="container">
  <div class="search">
    <input id="searchInput" placeholder="Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ù…Ø­ØµÙˆÙ„..." />
  </div>

  <div class="controls">
    <button class="btn" id="clearCartBtn">Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
  </div>

  <div id="listContainer"></div>
</div>

<button class="cart-toggle" id="cartToggle">ğŸ›’</button>

<div class="cart-panel" id="cartPanel">
  <div class="cart-header">
    <div><strong>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</strong><div class="small" id="cartCount">0 Ú©Ø§Ù„Ø§</div></div>
    <div class="small" id="subtotalShow">Ø¬Ù…Ø¹: 0 ØªÙˆÙ…Ø§Ù†</div>
  </div>

  <div class="cart-list" id="cartList"></div>

  <div class="total">
    <div class="small">Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ</div>
    <div id="totalPrice">0 ØªÙˆÙ…Ø§Ù†</div>
  </div>

  <button class="printBtn" id="printBtn">Ù†Ù…Ø§ÛŒØ´ Ùˆ Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±</button>
</div>

<div id="invoicePrint" style="display:none;padding:18px;font-family:Tahoma, sans-serif;direction:rtl;">
  <div style="text-align:center;margin-bottom:8px;">
    <div style="font-weight:700;font-size:1.1rem">Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</div>
    <div class="small">Ø±Ø³ÛŒØ¯ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ÛŒ</div>
    <div class="small" id="invDate"></div>
  </div>
  <table style="width:100%;border-collapse:collapse;">
    <thead><tr style="border-bottom:1px solid #ddd"><th style="text-align:right">Ù…Ø­ØµÙˆÙ„</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>ÙÛŒ</th><th>Ø¬Ù…Ø¹</th></tr></thead>
    <tbody id="invBody"></tbody>
  </table>
  <div style="margin-top:10px;text-align:right;font-weight:800">Ø¬Ù…Ø¹ Ú©Ù„: <span id="invTotal">0</span> ØªÙˆÙ…Ø§Ù†</div>
  <div style="margin-top:10px;text-align:center;font-size:12px">Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ â€” Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</div>
</div>

<script>
const categories={
"Ø¨Ø³ØªÙ†ÛŒ Ùˆ ÙØ§Ù„ÙˆØ¯Ù‡":[
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø¨Ø¯ÙˆÙ† Ù…ØºØ²",price:40000},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù…ØºØ²Ø¯Ø§Ø±",price:260000},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø­ØµÛŒØ±ÛŒ",price:40000},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:40000},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø§Ø³Ú©ÙˆÙ¾ÛŒ",price:25000},
{name:"ÙØ§Ù„ÙˆØ¯Ù‡",price:50000},
{name:"ÙØ§Ù„ÙˆØ¯Ù‡ Ø¨Ø³ØªÙ†ÛŒ",price:70000},
{name:"Ø·Ø§Ù„Ø¨ÛŒ Ø¨Ø³ØªÙ†ÛŒ",price:70000},
{name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬ Ø¨Ø³ØªÙ†ÛŒ",price:60000}
],
"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§":[
{name:"Ø´ÛŒØ± Ù…ÙˆØ²",price:80000},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø®Ø±Ù…Ø§",price:120000},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ú¯Ø±Ø¯Ùˆ",price:150000},
{name:"Ø´ÛŒØ± Ù¾Ø³ØªÙ‡",price:150000},
{name:"Ø´ÛŒØ± Ø§Ù†Ø¨Ù‡",price:180000},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø¨Ø³ØªÙ†ÛŒ",price:100000},
{name:"Ø´ÛŒÚ©",price:120000},
{name:"Ø¢ÛŒØ³ Ù¾Ú©",price:120000}
],
"Ø¢Ø¨Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§":[
{name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬",price:40000},
{name:"Ø¢Ø¨ Ø§Ù†Ø§Ø±",price:90000},
{name:"Ø¢Ø¨ Ø²Ø±Ø´Ú©",price:90000},
{name:"Ø¢Ø¨ Ø³ÛŒØ¨",price:70000},
{name:"Ø¢Ø¨ Ø·Ø§Ù„Ø¨ÛŒ",price:60000},
{name:"Ø¢Ø¨ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡",price:60000},
{name:"Ø¢Ø¨ Ø¢Ù„Ø¨Ø§Ù„Ùˆ",price:60000},
{name:"Ø¢Ø¨ Ù¾Ø±ØªØºØ§Ù„",price:80000}
],
"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ":[
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ù„ÛŒÙˆØ§Ù†ÛŒ",price:160000},
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ú©ÙˆÚ†Ú©",price:180000},
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ø¨Ø²Ø±Ú¯",price:250000},
{name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:70000},
{name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù…Ø®ØµÙˆØµ",price:150000}
],
"Ù‚Ù‡ÙˆÙ‡â€ŒÙ‡Ø§":[
{name:"Ø³ÛŒÙ†Ú¯Ù„",price:40000},
{name:"Ø¯Ø¨Ù„",price:50000},
{name:"Ø¢ÙÙˆÚ¯Ø§ØªÙˆ",price:80000},
{name:"Ù‡Ø§Øª Ú†Ø§Ú©Ù„Øª",price:90000},
{name:"Ú©Ø§Ù¾ÙˆÚ†ÛŒÙ†Ùˆ",price:80000},
{name:"Ù…Ø§Ø³Ø§Ù„Ø§",price:80000},
{name:"Ù†Ø³Ú©Ø§ÙÙ‡",price:75000},
{name:"Ù„Ø§ØªÙ‡",price:85000},
{name:"Ø¢ÛŒØ³ Ù„Ø§ØªÙ‡",price:90000},
{name:"Ø§Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:70000},
{name:"Ø§ÛŒØ³ Ø§Ù…Ø±ÛŒÚ©Ø§Ù†Ùˆ",price:80000},
{name:"Ú©Ø§Ø±Ø§Ù…Ù„ Ù…Ø§Ú©ÛŒØ§ØªÙˆ",price:90000},
{name:"Ù…ÙˆÚ©Ø§",price:90000}
]};

let cart=[];
const listContainer=document.getElementById('listContainer');
const cartList=document.getElementById('cartList');
const totalPriceEl=document.getElementById('totalPrice');
const cartCountEl=document.getElementById('cartCount');
const subtotalShow=document.getElementById('subtotalShow');
const clearCartBtn=document.getElementById('clearCartBtn');
const printBtn=document.getElementById('printBtn');
const searchInput=document.getElementById('searchInput');
const cartToggle=document.getElementById('cartToggle');
const cartPanel=document.getElementById('cartPanel');

cartToggle.onclick=()=>cartPanel.classList.toggle('open');

function renderList(filter=''){
  listContainer.innerHTML='';
  for(let cat in categories){
    let accWrap=document.createElement('div'); accWrap.className='accordion';
    let btn=document.createElement('button'); btn.className='acc-btn';
    btn.innerHTML=cat+' <span>+</span>'; accWrap.appendChild(btn);
    let panel=document.createElement('div'); panel.className='panel';
    categories[cat].forEach(p=>{
      if(filter && !p.name.includes(filter)) return;
      const prod=document.createElement('div'); prod.className='product';
      const left=document.createElement('div'); left.className='prod-left';
      const nameEl=document.createElement('div'); nameEl.className='prod-name'; nameEl.textContent=p.name;
      const priceEl=document.createElement('div'); priceEl.className='prod-price'; priceEl.textContent=p.price.toLocaleString()+' ØªÙˆÙ…Ø§Ù†';
      left.appendChild(nameEl); left.appendChild(priceEl);
      const addBtn=document.createElement('button'); addBtn.className='prod-add'; addBtn.textContent='â•';
      addBtn.onclick=()=>{addToCart(p);}
      prod.appendChild(left); prod.appendChild(addBtn);
      panel.appendChild(prod);
    });
    accWrap.appendChild(panel); listContainer.appendChild(accWrap);
    btn.onclick=()=>{panel.style.display=(panel.style.display==='block')?'none':'block'; btn.classList.toggle('active')}
  }
}

function addToCart(item){
  const exist=cart.find(c=>c.name===item.name);
  if(exist){exist.qty+=1;}else{cart.push({...item,qty:1});}
  renderCart();
}

function renderCart(){
  cartList.innerHTML=''; let subtotal=0;
  cart.forEach((i,idx)=>{
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<div>${i.name}</div>
      <div class="qty">
        <input type="number" min="1" value="${i.qty}" />
        <button class="remove-btn">â–</button>
      </div>
      <div>${i.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
      <div>${(i.price*i.qty).toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>`;
    div.querySelector('input').onchange=e=>{i.qty=parseInt(e.target.value)||1; renderCart();}
    div.querySelector('.remove-btn').onclick=()=>{
      i.qty-=1;
      if(i.qty<=0){cart.splice(idx,1);}
      renderCart();
    }
    cartList.appendChild(div);
    subtotal+=i.price*i.qty;
  });
  totalPriceEl.textContent=subtotal.toLocaleString()+' ØªÙˆÙ…Ø§Ù†';
  cartCountEl.textContent=cart.length+' Ú©Ø§Ù„Ø§';
  subtotalShow.textContent='Ø¬Ù…Ø¹: '+subtotal.toLocaleString()+' ØªÙˆÙ…Ø§Ù†';
}

searchInput.addEventListener('input',e=>{renderList(e.target.value)});
clearCartBtn.onclick=()=>{cart=[]; renderCart();}
printBtn.onclick=()=>{
  const invBody=document.getElementById('invBody');
  const invTotal=document.getElementById('invTotal');
  invBody.innerHTML=''; let total=0;
  cart.forEach(i=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td style="text-align:right">${i.name}</td><td>${i.qty}</td><td>${i.price.toLocaleString()}</td><td>${(i.price*i.qty).toLocaleString()}</td>`;
    invBody.appendChild(tr); total+=i.price*i.qty;
  });
  invTotal.textContent=total.toLocaleString();
  document.getElementById('invDate').textContent=new Date().toLocaleString();
  document.getElementById('invoicePrint').style.display='block';
  window.print();
  document.getElementById('invoicePrint').style.display='none';
}

renderList();
renderCart();
</script>

</body>
</html>
